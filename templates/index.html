<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blinkathon</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
      integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="bg-gray-900 p-5">
      <div>
        <h1 class="text-3xl">CV Game</h1>
        <p>This is a super cool game.</p>
        <img id="video-player" width="500" />
        <p>
          <a
            href="/about"
            class="bg-blue-500 hover:bg-blue-400 text-lg py-2 px-8 text-white hover:underline rounded-lg"
            >about</a
          >
        </p>
        <p id="gameStatus">Blinkathon status</p>
        <button id="startBtn" onclick="startGame()">Start</button>
      </div>
    </div>
    <script type="text/javascript" charset="utf-8">
      var videoPlayer = document.getElementById('video-player');
      videoPlayer.src = '/video-feed';
    </script>
    <script type="text/javascript" charset="utf-8">
      var socket = io();
      socket.on('connect', function () {
        console.log('connected!');
      });
      socket.on('game', function (game) {
        console.log('game:', game);
        
        if (!!game.playing) {
          const gameStatus = document.getElementById('gameStatus')

          gameStatus.innerText = game.status
        }
      });

      const startGame = () => {
        const startBtn = document.getElementById("startBtn")
        startBtn.remove()
        socket.emit('start-game')
      }

      const testemitfromclient = () => {
        socket.emit('test', {msg:'test emit from client'})
      }
    </script>
  </body>
</html>
